{"version":3,"sources":["index.ts"],"names":[],"mappings":";AAAA,aAmuBC,IAAA,EAAA,MAAA,KAAA,UAAA,WAAA,OAAA,EAAA,OAAA,QAAA,SAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,UAAA,OAAA,EAAA,EAAA,IAAA,IAAA,IAAA,KAAA,EAAA,UAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,KAAA,EAAA,GAAA,EAAA,IAAA,OAAA,IAAA,MAAA,KAAA,YAltBK,EAA4B,SAAC,GAC/B,OAAA,EACK,MAAM,YACN,IAAI,SAAC,GAAkB,MAAA,CACpB,UAAW,EAAK,MAAM,KAAK,GAC3B,SAAU,EAAK,MAAM,KAAK,OAIhC,EAAwB,SAAxB,EACF,EACA,EACA,EACA,EACA,GACA,YAJA,IAAA,IAAA,EAAA,QACA,IAAA,IAAA,EAAA,QACA,IAAA,IAAA,EAAA,QACA,IAAA,IAAA,EAAA,SACmB,IAAnB,EAAK,GACD,CAAE,oBAAoB,EAAM,YAAa,GACzC,EAAiB,OAAO,SAAC,GAAgB,OAAA,IAAQ,IAAU,OACvD,CAAE,oBAAoB,EAAO,YAAa,GAC1C,EACI,EACA,GAC8B,QAA7B,EAAK,GAAU,UACZ,SAAS,EAAK,GAAU,UACxB,GACJ,GAA4C,QAA7B,EAAK,GAAU,UAC1B,SAAS,EAAK,GAAU,UACxB,GACJ,EAAO,EACP,EAAiB,OAAO,KAElC,EAAkD,SAAlD,EACF,EACA,EACA,GAKA,YANA,IAAA,IAAA,EAAqB,EAAsB,SAC3C,IAAA,IAAA,EACI,EACK,UAAU,SAAC,GACR,MAAoB,QAApB,EAAM,WAA2C,QAApB,EAAM,aAE/C,EAAW,mBACP,EAAW,YACX,EACI,EACA,EACI,EAAK,IAAI,SAAC,EAAoB,GAC1B,OAAA,IAAM,EACmB,QAApB,EAAM,UAAqB,EAAA,EAAA,GACnB,GAAK,CAAE,UAAW,QAAS,EAAA,EAAA,GAC3B,GAAK,CAAE,UAAW,QAC3B,KACZ,EAAK,UAAU,SAAC,EAAoB,GAChC,OAAA,EAAQ,IAAqC,QAApB,EAAM,WAA2C,QAApB,EAAM,eAqB5E,SAAS,IAAI,IAAA,IAAA,EAAA,GAAA,EAAA,EAAA,EAAA,UAAA,OAAA,IAAA,EAAA,GAAA,UAAA,GACgB,oBAAb,UACR,QAAQ,IAAG,MAAX,QAAe,GACf,SAAS,cAAc,OAAQ,WAAa,QAAU,EAAK,KAAK,MAKxE,SAAS,IACG,MAAA,0GAUZ,SAAS,IACE,MAAA,GAGX,SAAS,IAED,MAAA,68UAxCR,EAAI,KACA,KAAK,UAAU,EAEX,EAA0B,QAIlC,EAAI,KACA,KAAK,UACD,EACI,EAA0B","file":"index.js","sourceRoot":"../src","sourcesContent":["// import { uniqueShallow } from \"../../../helpmodule.js\";\r\n\r\n// type Bag = {\r\n//     color: string,\r\n//     innerBags: { amount: number, color: string }[]\r\n// }\r\n\r\ntype Instruction = {\r\n    operation: string,\r\n    argument: string\r\n}\r\n\r\ntype Result = {\r\n    naturalTermination: boolean,\r\n    accumulator: number\r\n}\r\n\r\nconst handleInputToInstructions = (str: string): Instruction[] =>\r\n    str\r\n        .split(/\\s*\\n\\s*/)\r\n        .map((line: string) => ({\r\n            operation: line.split(\" \")[0],\r\n            argument: line.split(\" \")[1]\r\n        }))\r\n\r\n\r\nconst goThroughInstructions = (\r\n    list: Instruction[],\r\n    position: number = 0,\r\n    accumulator: number = 0,\r\n    step: number = 0,\r\n    visitedPositions: number[] = []): Result =>\r\n    list[position] === undefined ?\r\n        { naturalTermination: true, accumulator: accumulator } :\r\n        visitedPositions.filter((pos: number) => pos === position).length ?\r\n            { naturalTermination: false, accumulator: accumulator } :\r\n            goThroughInstructions(\r\n                list,\r\n                position +\r\n                (list[position].operation === \"jmp\" ?\r\n                    parseInt(list[position].argument) :\r\n                    1),\r\n                accumulator + (list[position].operation === \"acc\" ?\r\n                    parseInt(list[position].argument) :\r\n                    0),\r\n                step + 1,\r\n                visitedPositions.concat(position))\r\n\r\nconst recursivelyGoThroughListUntilNaturalTermination = (\r\n    list: Instruction[],\r\n    lastResult: Result = goThroughInstructions(list),\r\n    nextPosition: number =\r\n        list\r\n            .findIndex((instr: Instruction) =>\r\n                instr.operation === \"jmp\" || instr.operation === \"nop\")\r\n): number =>\r\n    lastResult.naturalTermination ?\r\n        lastResult.accumulator :\r\n        recursivelyGoThroughListUntilNaturalTermination(\r\n            list,\r\n            goThroughInstructions(\r\n                list.map((instr: Instruction, i) =>\r\n                    i === nextPosition ?\r\n                        (instr.operation === \"jmp\" ?\r\n                            { ...instr, operation: \"nop\" } :\r\n                            { ...instr, operation: \"jmp\" }) :\r\n                        instr)),\r\n            list.findIndex((instr: Instruction, index) =>\r\n                index > nextPosition && (instr.operation === \"jmp\" || instr.operation === \"nop\"))\r\n        )\r\n\r\n\r\n\r\n\r\nlog(\"a:\",\r\n    JSON.stringify(goThroughInstructions(\r\n\r\n        handleInputToInstructions(getInput())\r\n    ))\r\n)\r\n\r\nlog(\"b:\",\r\n    JSON.stringify(\r\n        recursivelyGoThroughListUntilNaturalTermination(\r\n            handleInputToInstructions(getInput()))\r\n    )\r\n)\r\n\r\n\r\nfunction log(...args: any[]): void {\r\n    if (typeof (console) !== 'undefined') {\r\n        console.log(...args);\r\n        document.querySelector('pre')!.innerHTML += \"<br/>\" + args.join(\" \");\r\n    }\r\n}\r\n\r\n\r\nfunction getTestInput(): string {\r\n    return (`nop +0\r\n    acc +1\r\n    jmp +4\r\n    acc +3\r\n    jmp -3\r\n    acc -99\r\n    acc +1\r\n    jmp -4\r\n    acc +6`)\r\n}\r\nfunction getAnotherTestInput(): string {\r\n    return ``;\r\n}\r\n\r\nfunction getInput(): string {\r\n    return (\r\n        `acc -7\r\n        acc +6\r\n        acc +4\r\n        nop +191\r\n        jmp +199\r\n        acc +44\r\n        acc -9\r\n        jmp +505\r\n        acc -12\r\n        acc +45\r\n        jmp +204\r\n        jmp +129\r\n        acc +17\r\n        nop +287\r\n        jmp +584\r\n        acc +16\r\n        jmp +363\r\n        acc +4\r\n        nop +142\r\n        acc +34\r\n        nop +345\r\n        jmp +522\r\n        jmp +53\r\n        acc -10\r\n        jmp +524\r\n        jmp +492\r\n        jmp +319\r\n        acc -9\r\n        jmp +550\r\n        acc -19\r\n        jmp +15\r\n        acc +24\r\n        jmp +30\r\n        acc -19\r\n        acc +12\r\n        acc -2\r\n        jmp +274\r\n        nop +91\r\n        acc +10\r\n        acc +4\r\n        jmp +501\r\n        acc +49\r\n        acc +29\r\n        jmp +488\r\n        jmp +504\r\n        jmp +277\r\n        acc +20\r\n        acc +34\r\n        jmp -40\r\n        acc +10\r\n        acc -4\r\n        acc -19\r\n        acc +38\r\n        jmp +239\r\n        acc -16\r\n        acc -3\r\n        nop +513\r\n        jmp +526\r\n        jmp +131\r\n        nop +539\r\n        acc -11\r\n        jmp +470\r\n        acc +30\r\n        jmp +166\r\n        acc +17\r\n        acc -16\r\n        nop +315\r\n        jmp +364\r\n        acc +15\r\n        nop -61\r\n        acc -12\r\n        nop +147\r\n        jmp -31\r\n        acc -9\r\n        jmp +324\r\n        acc +0\r\n        jmp +1\r\n        jmp +321\r\n        acc +0\r\n        acc +6\r\n        acc -17\r\n        acc +13\r\n        jmp +461\r\n        jmp +184\r\n        acc +22\r\n        jmp +182\r\n        jmp +504\r\n        nop +131\r\n        acc +12\r\n        acc -6\r\n        acc +29\r\n        jmp +187\r\n        acc +17\r\n        jmp +67\r\n        jmp -2\r\n        acc +50\r\n        acc +17\r\n        jmp +442\r\n        acc +8\r\n        nop +146\r\n        acc -12\r\n        acc +32\r\n        jmp +237\r\n        jmp +1\r\n        acc +34\r\n        acc +1\r\n        acc +18\r\n        jmp +274\r\n        acc +17\r\n        acc -12\r\n        jmp +282\r\n        acc +49\r\n        acc +11\r\n        acc +28\r\n        acc +40\r\n        jmp +79\r\n        acc +19\r\n        acc -8\r\n        nop +87\r\n        jmp +347\r\n        acc +48\r\n        nop +189\r\n        jmp +419\r\n        acc +31\r\n        jmp +1\r\n        acc +31\r\n        jmp +1\r\n        jmp -94\r\n        nop -45\r\n        nop +412\r\n        acc -14\r\n        acc +35\r\n        jmp -49\r\n        jmp +177\r\n        jmp +127\r\n        jmp +360\r\n        jmp +114\r\n        acc -11\r\n        nop +248\r\n        jmp -64\r\n        acc +31\r\n        acc +23\r\n        acc +4\r\n        nop +110\r\n        jmp +61\r\n        acc +45\r\n        nop +444\r\n        jmp +218\r\n        jmp -131\r\n        acc +36\r\n        jmp -142\r\n        nop +361\r\n        acc -3\r\n        acc +6\r\n        jmp +161\r\n        acc +24\r\n        acc -7\r\n        acc +4\r\n        acc +31\r\n        jmp +91\r\n        jmp -20\r\n        jmp +1\r\n        nop -11\r\n        jmp -146\r\n        acc +25\r\n        acc +33\r\n        jmp +52\r\n        acc -7\r\n        jmp +82\r\n        acc +7\r\n        acc +21\r\n        acc +6\r\n        jmp +397\r\n        acc +12\r\n        acc +5\r\n        acc -9\r\n        acc +24\r\n        jmp +371\r\n        acc +50\r\n        acc +47\r\n        acc +19\r\n        jmp +238\r\n        jmp +396\r\n        acc -16\r\n        nop +394\r\n        jmp +180\r\n        acc +1\r\n        acc +40\r\n        jmp +237\r\n        acc +22\r\n        nop -30\r\n        jmp -129\r\n        acc +22\r\n        jmp +232\r\n        acc +23\r\n        acc +27\r\n        acc +47\r\n        jmp +133\r\n        acc +0\r\n        nop +30\r\n        acc +11\r\n        acc -9\r\n        jmp +381\r\n        jmp +75\r\n        jmp -64\r\n        acc -15\r\n        acc +29\r\n        acc +49\r\n        jmp +195\r\n        nop +113\r\n        acc -16\r\n        nop +312\r\n        acc +6\r\n        jmp -44\r\n        acc +26\r\n        acc +40\r\n        jmp +272\r\n        jmp +83\r\n        jmp +365\r\n        acc +24\r\n        acc +4\r\n        jmp +29\r\n        acc +8\r\n        jmp -137\r\n        acc +13\r\n        jmp +1\r\n        acc +33\r\n        nop -182\r\n        jmp +22\r\n        jmp +9\r\n        nop +20\r\n        acc +14\r\n        nop +291\r\n        jmp -28\r\n        jmp -83\r\n        acc +18\r\n        acc +5\r\n        jmp +32\r\n        acc +48\r\n        nop -128\r\n        acc +28\r\n        jmp +225\r\n        acc +29\r\n        nop +280\r\n        jmp +304\r\n        acc +37\r\n        acc +50\r\n        acc +30\r\n        jmp +131\r\n        jmp -60\r\n        acc +27\r\n        jmp +272\r\n        jmp +358\r\n        acc -1\r\n        acc +37\r\n        jmp +203\r\n        acc +1\r\n        acc +37\r\n        acc +12\r\n        acc -16\r\n        jmp +263\r\n        acc -16\r\n        acc +30\r\n        jmp +86\r\n        acc +26\r\n        acc +6\r\n        jmp +344\r\n        jmp -147\r\n        jmp -185\r\n        acc -5\r\n        acc -3\r\n        acc +7\r\n        acc +9\r\n        jmp -205\r\n        nop -85\r\n        acc -4\r\n        acc -1\r\n        jmp +266\r\n        acc +19\r\n        nop -143\r\n        acc -3\r\n        jmp -12\r\n        acc +12\r\n        acc -18\r\n        jmp +326\r\n        acc +39\r\n        jmp +165\r\n        nop -279\r\n        acc +19\r\n        acc +46\r\n        acc +5\r\n        jmp -163\r\n        acc -13\r\n        jmp +1\r\n        acc +33\r\n        acc +44\r\n        jmp -62\r\n        acc -10\r\n        acc +7\r\n        jmp +240\r\n        acc -19\r\n        jmp -190\r\n        acc -12\r\n        jmp -167\r\n        acc -2\r\n        nop -288\r\n        acc -13\r\n        jmp +303\r\n        acc +24\r\n        jmp -283\r\n        jmp +309\r\n        nop +190\r\n        acc +38\r\n        acc -12\r\n        jmp -47\r\n        acc +15\r\n        acc +31\r\n        jmp -259\r\n        nop +154\r\n        acc +25\r\n        acc +8\r\n        jmp -295\r\n        acc +37\r\n        acc +34\r\n        acc -18\r\n        acc +41\r\n        jmp +156\r\n        acc +17\r\n        acc +37\r\n        jmp -243\r\n        nop -318\r\n        acc +45\r\n        acc +33\r\n        jmp +139\r\n        acc -6\r\n        acc +34\r\n        acc +25\r\n        acc +3\r\n        jmp +260\r\n        jmp +1\r\n        acc +24\r\n        jmp +154\r\n        acc +34\r\n        acc -19\r\n        jmp +211\r\n        acc +28\r\n        jmp +98\r\n        acc +45\r\n        jmp -143\r\n        acc +41\r\n        acc +8\r\n        acc +33\r\n        nop +217\r\n        jmp +119\r\n        acc +21\r\n        jmp -150\r\n        acc +25\r\n        acc +19\r\n        jmp +1\r\n        acc +20\r\n        jmp +209\r\n        acc +43\r\n        acc +18\r\n        acc +2\r\n        jmp -159\r\n        acc +25\r\n        acc +20\r\n        acc -4\r\n        acc +45\r\n        jmp +89\r\n        nop +33\r\n        acc +27\r\n        jmp +190\r\n        acc +47\r\n        acc +36\r\n        jmp +180\r\n        acc +3\r\n        jmp +1\r\n        jmp -349\r\n        jmp -6\r\n        jmp -244\r\n        acc +2\r\n        acc +42\r\n        jmp -357\r\n        acc +3\r\n        jmp -377\r\n        acc +31\r\n        nop -292\r\n        acc +6\r\n        acc +9\r\n        jmp -212\r\n        jmp -91\r\n        acc +11\r\n        jmp +119\r\n        acc -18\r\n        acc +38\r\n        acc +31\r\n        jmp -261\r\n        jmp +1\r\n        acc +2\r\n        jmp -197\r\n        acc +0\r\n        jmp +1\r\n        acc +40\r\n        acc +31\r\n        acc +4\r\n        acc +45\r\n        jmp -68\r\n        acc -17\r\n        acc +8\r\n        nop -384\r\n        jmp -193\r\n        acc +22\r\n        nop +170\r\n        acc -19\r\n        acc +34\r\n        jmp -321\r\n        acc +46\r\n        jmp +130\r\n        acc -19\r\n        jmp +115\r\n        acc -12\r\n        acc +23\r\n        acc +16\r\n        jmp -94\r\n        acc +11\r\n        nop -286\r\n        jmp -276\r\n        acc +36\r\n        acc +25\r\n        jmp -32\r\n        acc +6\r\n        acc +39\r\n        jmp +171\r\n        acc -5\r\n        nop -131\r\n        jmp -368\r\n        acc +41\r\n        acc -7\r\n        nop -336\r\n        jmp -428\r\n        acc +21\r\n        acc +45\r\n        jmp -225\r\n        acc -2\r\n        acc +14\r\n        acc +29\r\n        jmp -439\r\n        acc +36\r\n        acc +26\r\n        jmp -433\r\n        acc +29\r\n        acc +36\r\n        acc +31\r\n        jmp -232\r\n        nop -210\r\n        nop -44\r\n        jmp -382\r\n        nop -119\r\n        acc +43\r\n        jmp +1\r\n        jmp -24\r\n        acc -13\r\n        acc +22\r\n        acc +16\r\n        jmp +90\r\n        nop -443\r\n        acc +23\r\n        acc +15\r\n        acc -3\r\n        jmp -225\r\n        jmp -448\r\n        acc +21\r\n        acc -19\r\n        acc +23\r\n        jmp +1\r\n        jmp -447\r\n        acc +36\r\n        acc -1\r\n        acc +31\r\n        nop +8\r\n        jmp +97\r\n        jmp -96\r\n        acc -16\r\n        acc +7\r\n        acc -2\r\n        jmp +1\r\n        jmp -237\r\n        jmp +1\r\n        acc -12\r\n        acc +29\r\n        acc -1\r\n        jmp -188\r\n        acc +8\r\n        jmp -453\r\n        nop -234\r\n        acc +46\r\n        acc +20\r\n        acc +24\r\n        jmp -68\r\n        jmp -178\r\n        acc +42\r\n        jmp -469\r\n        acc +19\r\n        acc +35\r\n        jmp -4\r\n        acc +49\r\n        jmp +65\r\n        nop +15\r\n        nop -209\r\n        acc +27\r\n        jmp -261\r\n        acc +15\r\n        jmp -344\r\n        acc +13\r\n        acc +43\r\n        jmp -194\r\n        jmp +1\r\n        jmp -335\r\n        nop -424\r\n        acc -13\r\n        nop -387\r\n        jmp -333\r\n        acc +33\r\n        acc +30\r\n        jmp -272\r\n        acc +16\r\n        acc +5\r\n        acc +21\r\n        acc +41\r\n        jmp -312\r\n        acc +50\r\n        jmp -429\r\n        nop +57\r\n        jmp -212\r\n        acc +7\r\n        acc -13\r\n        jmp -252\r\n        jmp -277\r\n        jmp -114\r\n        jmp -528\r\n        jmp -40\r\n        jmp -275\r\n        acc +27\r\n        nop -322\r\n        jmp -356\r\n        acc -11\r\n        jmp -96\r\n        nop -9\r\n        acc -15\r\n        jmp -194\r\n        acc +9\r\n        acc +47\r\n        acc +44\r\n        jmp -459\r\n        acc -2\r\n        acc -12\r\n        nop -354\r\n        jmp -166\r\n        acc +44\r\n        acc +23\r\n        jmp -503\r\n        acc +47\r\n        acc +39\r\n        acc +10\r\n        acc +14\r\n        jmp -543\r\n        acc +43\r\n        jmp -25\r\n        jmp -52\r\n        acc -19\r\n        jmp -423\r\n        acc +35\r\n        acc +22\r\n        acc +10\r\n        acc +16\r\n        jmp -527\r\n        jmp -482\r\n        acc +2\r\n        acc +21\r\n        acc -17\r\n        jmp -417\r\n        jmp -282\r\n        acc +16\r\n        nop -424\r\n        nop -527\r\n        jmp -207\r\n        acc +23\r\n        acc +21\r\n        jmp -503\r\n        acc +17\r\n        acc -14\r\n        jmp -189\r\n        acc +43\r\n        acc +14\r\n        acc +11\r\n        nop -427\r\n        jmp -54\r\n        acc +8\r\n        nop -37\r\n        nop -542\r\n        jmp -332\r\n        acc +27\r\n        jmp +7\r\n        jmp -98\r\n        acc +50\r\n        acc +0\r\n        acc +48\r\n        acc +0\r\n        jmp -517\r\n        acc +15\r\n        acc +10\r\n        jmp -478\r\n        jmp -141\r\n        acc +0\r\n        acc +18\r\n        jmp -468\r\n        acc +49\r\n        jmp -112\r\n        nop -536\r\n        acc -14\r\n        acc -13\r\n        acc +34\r\n        jmp +1`\r\n    );\r\n}"]}