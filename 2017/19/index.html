<head>
    <meta charset="utf-8">
</head>
<body><pre>check console</pre></body>
<script src="../help/help.js"></script>
<script>

"use strict"




const input = 
`
                                                                                                                                                                             |                           
       +-------+             +---+                                         +-------------+           +-+   +---------+ +---------------------------------------------------------+ +-+     +---+         
       |       |             |   |                                         |             |           | |   |         | |                                                     |   | | |     |   |         
 +-----|-------+     +-------|-----+                                       +-------+ +-+ +-----------|-|---|---------|-----------------+ +---------------------------------------+ | +-----|---|-------+ 
 |     |             |       |   | |                                               | | |             | |   |         | |               | |                                   |     |       |   |       | 
 |     |             |       |   | |       +-----------+                         +---+ |         +---|-|-------------|-|---------------+ +---+                               |     |     +---+ |       | 
 |     |             |       |   | |       |           |                         | |   |         |   | |   |         | |                     |                               |     |     | | | |       | 
 |     |             |       |   | |       +-----------------------+             | |   |         |   | |   |         | |                     |                               |     |     | | | |       | 
 |     |             |       |   | |                   |           |             | |   |         |   | |   |         | |                     |                               |     |     | | | |       | 
 |     |             |       |   | |     +-------+     |   +-------|-----------------------------|---+ | +-|-------+ | |                   +-----+                           |     |     | | | |       | 
 |     |             |       |   | |     |       |     |   |       |             | |   |         |     | | |       | | |                   | |   |                           |     |     | | | |       | 
 |     |             |       |   | |     |       |     |   |       +-------------|-|---|---------|-------|---------|---|---------------------|---|-------+   +---------------|-----------|-+ | |       | 
 |     |             |       |   | |     |       |     |   |                     | |   |         |     | | |       | | |                   | |   |       |   |               |     |     |   | |       | 
 |     |             |       |   | |     |   +---------|-------------------------|-----|---------|---------|---------|-----------------------|---------------|-----------+   |   +-------------|-----+ | 
 |     |             |       |   | |     |   |   |     |   |                     | |   |         |     | | |       | | |                   | |   |       |   |           |   |   | |     |   | |     | | 
 |     |             |       |   +-|-------+ +-----+   |   |           +-----------|---|---------------|-----------|-+ |                   | |   |       |   |           |   |   | |     |   +-----+ | | 
 |     |             |       |     |     | |     | |   |   |           |         | |   |         |     | | |       |   |                   | |   |       |   |           |   |   | |     |     |   | | | 
 +---+ +-------------|-------------------|-+     | |   |   |           |         | |   |         |     | | |   +---|-----------------------|-|-----------------------------------|-----------+ |   | | | 
     |               |       |     |     |       | |   |   |           |         | |   |         |     | | |   |   |   |                   | |   |       |   |           |   |   | |     |   | |   | | | 
     +-+             |   +-----+ +-------|R--------|---------+         |         | |   |         +-----|---|---|-------|-----------------------------------------------+ | +-|---|-------|-+ | |   | +-+ 
       |             |   |   | | | |     |       | |   |   | |         |         | |   |               | | |   |   |   |                   | |   |       |   |         | | | |   | |     | | | |   |     
       |             | +-|-+ | | +-|-----|---+   | |   +---+ | +-----------------|-----|-------------------|-------|-------+               | |   |       |   +-------------------|-|-----|-----|-------+ 
       |             | | | | | |   |     |   |   | |         | |       |         | |   |               | | |   |   |   |   |               | |   |       |             | | | |   | |     | | | |   |   | 
       |             | | +---|-|---------|-------|-----------|-|-----------------|-|---+               | | |   |   |   |   |               | |   |   +-------+         | | | |   | |   +---|---------+ | 
       |             | |   | | |   |     |   |   | |         | |       |         | |                   | | |   |   |   |   |               | |   |   |   |   |         | | | |   | |   | | | | |   | | | 
       |             | |   | | |   |     |   |   | |         | |       |         | |   +---------------|---|-----------|---+               | |   |   |   |   |         | | | |   | |   | | | | |   | | | 
       |             | |   | | |   |     |   |   | |         | |       |         | |   |               | | |   |   |   |                   | |   |   |   |   |         | | | |   | |   | | | | |   | | | 
   +-+ | +---+       | |   | | |   |     |   |   | |     +-----|-----------------|-|---|-------+       | | |   |   |   |                   | |   |   |   |   |         | | | |   | |   | | | | |   | | | 
   | | | |   |       | |   | | |   |     |   |   | |     |   | |       |         | |   |       |       | | |   |   |   |                   | |   |   |   |   |         | | | |   | |   | | | | |   | | | 
   | | | |   |       | |   | | |   |     |   |   | |   +-|---|---------------------|-------+   |       +-|-|---|-------------------+       | |   |   |   | +-----+ +---+ | | |   | |   | | | | |   | | | 
   | | | |   |       | |   | | |   |     |   |   | |   | |   | |       |         | |   |   |   |         | |   |   |   |           |       | |   |   |   | | |   | |     | | |   | |   | | | | |   | | | 
   | +-|-------------------|---|---------|-------+ |   | | +-|---------------+   | |   |   |   |         | |   |   |   |           |       | |   |   |   | | |   | |     | | |   | |   | | | | |   | | | 
   |   | |   |       | |   | | |   |     |   |     |   | | | | |       |     |   | |   |   |   |         | |   |   |   |           |       | |   |   |   | | |   | |     | | |   | |   | | | | |   | | | 
   |   | |   |       | |   | | |   |     |   |     |   | | | | +-------|---------|---------+   |         | |   |   |   |           |       | | +-|---|-----------|-|-----|-------+ |   | | | | |   | | | 
   |   | |   |       | |   | | |   |     |   |     |   | | | |         |     |   | |   |       |         | |   |   |   |           |       | | | |   |   | | |   | |     | | |     |   | | | | |   | | | 
 +-|-+ | |   |       | |   | | |   |     |   |     |   | | | |         |     |   | |   |       |         | |   |   |   |           |       | | | |   | +-|-+ | +-|-|-------------------|---|-+ |   | | | 
 | | | | |   |       | |   | | |   |     |   |     |   | | | |         |     |   | |   |       |         | |   |   |   |           |       | | | |   | | |   | | | |     | | |     |   | | |   |   | | | 
 | | +---|-------------|---|---+   |     |   |     |   | +-+ |         |     |   | |   |       |         | |   |   |   |           |       | | | |   | | |   | | | |     | | |     |   | | |   |   | | | 
 | |   | |   |       | |   | |     |     |   |     |   |     |         |     |   | |   |       |         | |   |   |   |           |       | | | |   | | |   | | | |     | | |     |   | | |   |   | | | 
 | |   | |   |       | |   | |     |     |   |     | +-------|---------|-----|---|-|----I------------------|---+   |   |           |       | | | |   | | |   | | | |     | | |     |   | | |   |   | | | 
 | |   | |   |       | |   | |     |     |   |     | | |     |         |     |   | |   |       |         | |       |   |           |       | | | |   | | |   | | | |     | | |     |   | | |   |   | | | 
 | |   | |   |   +---|-----|-----+ |     +---|---+ | | |     |     +---|-----|---------|-----------------|---------------------------------|-|-|-----|---------|---------|-|---+   |   | | |   |   | | | 
 | |   | |   |   |   | |   | |   | |         |   | | | |     |     |   |     |   | |   |       |         | |       |   |           |       | | | |   | | |   | | | |     | | | |   |   | | |   |   | | | 
 | | +-------|---|-----|---|-----|-----------|---|-|---|---------------|-----|---------|-----------------|-|-----------|---------------------|-+ |   | | |   | | | |     | | | |   |   | | |   |   | | | 
 | | | | |   |   |   | |   | |   | |         |   | | | |     |     |   |     |   | |   |       |         | |       |   |           |       | |   |   | | |   | | | |     | | | |   |   | | |   |   | | | 
 | | | | |   |   |   | |   | |   | |         |   | | | |     |     |   |     |   | |   |       |         | |       |   |           |       | |   |   | | | +---|-|---------|-------|-+ | | |   |   | | | 
 | | | | |   |   |   | |   | |   | |         |   | | | |     |     |   |     |   | |   |       |         | |       |   |           |       | |   |   | | | | | | | |     | | | |   | | | | |   |   | | | 
 | | | | |   |   |   | |   | |   | |         |   | | | |     |     |   |     |   | |   |       |         | |       |   |           |       | |   |   | | | +-|-|-+ |     | | | |   | | | | |   |   | | | 
 | | | | |   |   |   | |   | |   | |         |   | | | |     |     |   |     |   | |   |       |         | |       |   |           |       | |   |   | | |   | |   |     | | | |   | | | | |   |   | | | 
 | | | | |   |   |   | |   | |   | |         |   | | | |     |     |   |     |   | |   |       +-----------|---------------------------------|-------+ | |   | |   |     | | | |   | | | | |   |   | | | 
 | | | | |   |   |   | |   | |   | |         |   | | | |     |     |   |     |   | |   |                 | |       |   |           |       | |   |     | |   | |   |     | | | |   | | | | |   |   | | | 
 | +-|-|---------------|-----|-----|---------|-------|-----------------------|---------|-----------------|-|-------|---------------|-------------------|-+   | |   |     | | | |   | | | | |   |   | | | 
 |   | | |   |   |   | |   | |   | |         |   | | | |     |     |   |     |   | |   |                 | |       |   |           |       | |   |     |     | |   |     | | | |   | | | | |   |   | | | 
 |   | | |   |   | +---------|---+ |         +-----|-|-----------------|-----|---------------------------|-|-----------------------|---------|---|-----|-----|---+ |     | | | |   | | | | |   |   | | | 
 |   | | |   |   | | | |   | |     |             | | | |     |     |   |     |   | |   |                 | |       |   |           |       | |   |     |     | | | |     | | | |   | | | | |   |   | | | 
 |   | | |   |   | | | |   | |     |             | | | |     |     |   |     |   | |   |                 | |       |   |           |       +-|---|-----------|-----------------|-----------|-----+ | | | 
 |   | | |   |   | | | |   | |     |             | | | |     |     |   |     |   | |   |                 | |       |   |           |         |   |     |     | | | |     | | | |   | | | | |   | | | | | 
 |   | | |   |   | | | |   +-|-------+           | | | |     |     |   |     |   | |   |                 | |       |   |           |         |   |     |     | | | |     | | | |   | | | | |   | | | | | 
 |   | | |   |   | | | |     |     | |           | | | |     |     |   |     |   | |   |                 | |       |   |           |         |   |     |     | | | |     | | | |   | | | | |   | | | | | 
 |   +--C----|-------|-------|-----|-|-----------|-|-|-+     |     |   |     |   | |   |         +---------|-------|-----------------------------------|-----|-|-|-|-+   | | | |   | | | | |   | | | | | 
 |     | |   |   | | | |     |     | |           | | |       |     |   |     |   | |   |         |       | |       |   |           |         |   |     |     | | | | |   | | | |   | | | | |   | | | | | 
 |     +-|---|-------|-|-----|-----|-------------|-|---+     |     |   |     |   | |   |         |       | |       |   |           |         |   |   +-|-----|---|-|-|---|---------|-----|-+   | | | | | 
 |       |   |   | | | |     |     | |           | | | |     |     |   |     |   | |   |         |       | |       |   |           |         |   |   | |     | | | | |   | | | |   | | | |     | | | | | 
 |       |   |   | | | |     |     | |         +-|-|---|-----------|-------------|-|---|-----------------|---------|---------------|-----------------|-|---------|-+ |   | | | |   | | | |     | | | | | 
 |       |   |   | | | |     |     | |         | | | | |     |     |   |     |   | |   |         |       | |       |   |           |         |   |   | |     | | |   |   | | | |   | | | |     | | | | | 
 |       |   |   | | | |     |     | |         | | | | |     |     |   |     |   | |   |         |       | |       |   |           | +-----------|-----|-----|-----------+ | | |   | | | |     | | | | | 
 |       |   |   | | | |     |     | |         | | | | |     |     |   |     |   | |   |         |       | |       |   |           | |       |   |   | |     | | |   |     | | |   | | | |     | | | | | 
 |       |   |   | | | |     |     | |         | | | | |     |     |   |     |   | |   |         |       | |       |   |           | |       |   |   | |     | | |   |     | | |   | | | |     | | | | | 
 |       |   |   | | | |     |     | |         | | | | |     |     |   |     |   | |   |         |       | |       |   |           | |       |   |   | |     | | |   |     | | |   | | | |     | | | | | 
 |       |   |   | | | |     |     | |         | | | | |     |     |   |     |   | |   |         |       | |       |   |           | |       |   |   | |     | | |   |     | | |   | | | |     | | | | | 
 |       |   |   | | | |     |     | |         | | | | |     |     |   |     |   | |   |         |       | |       |   |           | |       |   |   | |     | | |   |     | | |   | | | |     | | | | | 
 +-----------|-------|-|-------------|---------|-------------------|---|---------|-----|-----------------------+ +-|-------------------------|---|---|-----------|-+ |     | | |   | | | |     | | | | | 
         |   |   | | | |     |     | |         | | | | |     |     |   |     |   | |   |         |       | |   | | |   |           | |       |   |   | |     | | | | |     | | |   | | | |     | | | | | 
 +---------------------|-----|-----------------|-|-|-|-------|-----------+   +---------------------------|-+   | | |   |           +---------|---|---|-|-----|-|---+ +---------|---|-|-|-|---+ | | | | | 
 |       |   |   | | | |     |     | |         | | | | |     |     |   | |       | |   |         |       |     | | |   |             |       |   |   | |     | | |         | | |   | | | |   | | | | | | 
 |       |   |   | | | |     |   +---|---------|---|-|-------------|---|-|-------------|-----------------------|-------|-------------|-------|-------------------|---------|-|-+   | | | |   | | | | | | 
 |       |   |   | | | |     |   | | |         | | | | |     |     |   | |       | |   |         |       |     | | |   |             |       |   |   | |     | | |         | |     | | | |   | | | | | | 
 | +-----------+ | | | |     |   | | |         | | | | |     |     |   +---------|-----|-------------------------|-------------------------+ |   |   | |     | | |         | +-+   | | | |   | | | | | | 
 | |     |   | | | | | |     |   | | |         | | | | |     |     |     |       | |   |         |       |     | | |   |             |     | |   |   | |     | | |         |   |   | | | |   | | | | | | 
 | |     |   | | | | | |     |   | +-------------|-|-|-----------------------------|-------------|---------+   | | |   |             |     +-|---|-----|-------------------|---------|-|-----|-----+ | | 
 | |     |   | | | | | |     |   |   |         | | | | |     |     |     |       | |   |         |       | |   | | |   |             |       |   |   | |     | | |         |   |   | | | |   | | |   | | 
 | |     |   | | | | | |     |   +-------------|---|---|-----|-----|-----|-----+ | |   |         |       | | +-+ | |   |             |       |   |   | |     | | |         |   |   | | | |   | | |   | | 
 | |     |   | | | | | |     |       |         | | | | |     |     |     |     | | |   |         |       | | |   | |   |             |       |   |   | |     | | |         |   |   | | | |   | | |   | | 
 | |     |   | | | | | |     |       |         | | | | |     |     |     |     | | |   |         |     +---|-------------------------------------------------|-|-|---------|-------|-+ | |   | | |   | | 
 | |     |   | | | | | |     |       |         | | | | |     |     |     |     | | |   |         |     | | | |   | |   |             |       |   |   | |     | | |         |   |   |   | |   | | |   | | 
 | |   +-------|---|-------------+   |         +-|---+ |     |     |     |     | | |   | +-------------|---------|-----|-------------------------|---|-------|-|-|---+     |   |   |   | |   | | |   | | 
 | |   | |   | | | | | |     |   |   |           | |   |     |     |     |     | | |   | |       |     | | | |   | |   |             |       |   |   | |     | | |   |     |   |   |   | |   | | |   | | 
 | | +---|---|-|-|-|-|-|-----|-------|-------------|---|-----------------|-----|-------|-|-------------|-|-|-----|-|-----------------|-------|---|-----+     +-|-|---------|---|-------|---------|-+ | | 
 | | | | |   | | | | | |     |   |   |           | |   |     |     |     |     | | |   | |       |     | | | |   | |   |             |       |   |   |         | |   |     |   |   |   | |   | | | | | | 
 | | | | |   | | | | | |     |   +---|-----------|-|---------------------------|-|-----|-|---------------|-|-|-----|---+             |       |   |   |         | |   |     |   |   |   | |   | | | | | | 
 | | | | |   | | | | | |     |       |           | |   |     |     |     |     | | |   | |       |     | | | |   | |                 |       |   |   |         | |   |     |   |   |   | |   | | | O | | 
 | | | | | +-|---|-------------------|-----------|-----|-----|-----|---------+ | | |   | |       |     | | | |   | |   +---------+   |       |   |   |         | |   |     |   |   |   | |   | | | | | | 
 | | | | | | | | | | | |     |       |           | |   |     |     |     |   | | | |   | |       |     | | | |   | |   |         |   |       |   |   |         | |   |     |   |   |   | |   | | | | | | 
 +-+ | | | | | | | | | |     |       |           | |   |     |     |     |   | | | |   | |       |     | | +-|---------|---------------------|---|---|---------|-|---|-----|---|-------|------Q--|---+ | 
     | | | | | | | | | |     |       |           | |   |     |     |     |   | | | |   | |       |     | |   |   | |   |         |   |       |   |   |         | |   |     |   |   |   | |   | | | |   | 
 +-------------|-|---+ |     |       |           | |   |     |     |     |   | | | |   | |       |     | |   |   | |   +-------------|---------------+         | |   |     |   +---|---|-|---|-----|-+ | 
 |   | | | | | | | |   |     |       |           | |   |     |     |     |   | | | |   | |       |     | |   |   | |             |   |       |   |             | |   |     |       |   | |   | | | | | | 
 |   | | | | | | | |   |     |       |           | |   |     |     |     |   | | | |   | |       |     | |   |   | |             |   |       |   |         +---|-|-------------+   |   | |   | | | | | | 
 |   | | | | | | | |   |     |       |           | |   |     |     |     |   | Y | |   | |       |     | |   |   | |             |   |       P   |         |   | |   |     |   |   |   | |   | | | | | | 
 |   | | | | | | | |   |     |       |           | |   |     |     |     |   | | | |   | |       |     | |   |   | |         +-------|-------|---|-------+ |   | |   |     |   +-----+ | |   | | | | | | 
 |   | | | | | | | |   |     |       |           | |   |     |     |     |   | | | |   | |       |     | |   |   | |         |   |   |       |   |       | |   | |   |     |       | | | |   | | | | | | 
 |   | | | | | | | |   |     |       |           | |   |     |     |     |   | | | |   | |       |     | |   |   | |         |   |   |       |   |       | |   | |   |     |       | | | |   | | | | | | 
 |   | | | | | | | |   |     |       |           | |   |     |     |     |   | | | |   | |       |     | |   |   | |         |   |   |       |   |       | |   | |   |     |       | | | |   | | | | | | 
 |   | | | | | | | |   |     |       |           | |   |     |     |     |   | | | |   | |       |     | |   |   | |         |   |   |       |   |       | |   | |   |     |       | | | |   | | | | | | 
 |   | | | | | | | |   |     |       |           | |   |     |     |     |   | | | |   | |       |     | |   |   | |         |   |   |       |   |       | |   | |   |     |       | | | |   | | | | | | 
 |   | | | | | | | |   |     |       |           | |   |     | +---------|---|---------|-----------------|---|-------------------|---|-----------|-------|-+   | |   |     |       | | | |   | | | | | | 
 |   | | | | | | | |   |     |       |           | |   |     | |   |     |   | | | |   | |       |     | |   |   | |         |   |   |       |   |       |     | |   |     |       | | | |   | | | | | | 
 |   | | | | | | | |   |     |       |           | |   |     | |   |     |   | | | |   | |       |     | |   |   | |         |   |   |       |   |       |     | |   |     |       | | | |   | | | | | | 
 |   | | | | | | | |   |     |       |           | |   |     | |   |     |   | | | |   | |       |     | |   |   | |         |   |   |       |   |       |     | |   |     |       | | | |   | | | | | | 
 |   | | | | | | | |   |     |       |           | +---|-----|-----|-------------|-|-----|-------|-----|-----|---|---------+ |   |   |       |   |       |     | |   |     |       | | | |   | | | | | | 
 |   | | | | | | | |   |     |       |           |     |     | |   |     |   | | | |   | |       |     | |   |   | |       | |   |   |       |   |       |     | |   |     |       | | | |   | | | | | | 
 +---|-|-|-|-|---|-|-+ |     |       |           |     |     | |   |     |   | | | |   | |       |     | |   |   | |   +---|-+   +---|-------|---|-------------------|-------+     | | | |   | | | | | | 
     | | | | | | | | | |     |       |           |     |     | |   |     |   | | | |   | |       |     | |   |   | |   |   |         |       |   |       |     | |   |     | |     | | | |   | | | | | | 
 +---|-|---|-|-|-|-|---------|-------|-----------------|-----|---------------+ | | |   | |       |     | |   |   +-|---+   |         +-----------|-------|-----|---------+ | +---------|-------|-|-+ | | 
 |   | | | | | | | | | |     |       |           |     |     | |   |     |     | | |   | |       |     | |   |     |       |                 |   |       |     | |   |   | |       | | | |   | | |   | | 
 |   | | | | | | | | | |     |       |           |     |     | |   |     |     | | |   | |       |     | |   |     |       |                 +-----------|-+   | |   |   | |       | | | |   | | |   | | 
 |   | | | | | | | | | |     |       |           |     |     | |   |     |     | | |   | |       |     | |   |     |       |                     |       | |   | |   |   | |       | | | |   | | |   | | 
 |   | | | | | | | | | |     |       |           |     |     | |   |     | +---|-|-------|-------|-----|-+   |     |       |                     |       | |   | |   |   | |       | | | |   | | |   | | 
 |   | | | | | | | | | |     |       |           |     |     | |   |     | |   | | |   | |       |     |     |     |       |                     |       | |   | |   |   | |       | | | |   | | |   | | 
 |   | | | | | | | | | |     |       |           |     |     | |   |     | |   | | |   | |       |     |     |     |       |         +-------------------|-|---------|-----------------|-|-------|-+ | | 
 |   | | | | | | | | | |     |       |           |     |     | |   |     | |   | | |   | |       |     |     |     |       |         |           |       | |   | |   |   | |       | | | |   | | | | | | 
 |   | | | | | | | | | |     |     +-------------------|-----|-------------|-------|-------------|-----|-----|-----------------------|-----------|-------|-|-----|-------|-|-----+ | | | |   | | | | +-+ 
 |   | | | | | | | | | |     |     | |           |     |     | |   |     | |   | | |   | |       |     |     |     |       |         |           |       | |   | |   |   | |     | | | | |   | | | |     
 |   | | | | | | | | | |     |     | |           |     |     | |   |     | +---+ | |   | |       |     |     |     |       |         |           |       | |   | |   |   | |     | | | | |   | | | |     
 |   | | | | | | | | | |     |     | |           |     |     | |   |     |       | |   | |       |     |     |     |       |         |           |       | |   | |   |   | |     | | | | |   | | | |     
 |   | | | | | | | | | |     |     | |           |     |     | |   |     |       | +-----|-------------------|-----------------------------------+       | |   | |   |   | |     | | | | |   | | | |     
 |   | | | | | | | | | |     |     | |           |     |     | |   |     |       |     | |       |     |     |     |       |         |                   | |   | |   |   | |     | | | | |   | | | |     
 |   | | | | | | | | | |     |     | |           |     |     | | +-|-------------|---------------|-----------|-----|---------------+ |                   | |   | |   |   | |     | | | | |   | | | |     
 |   | | | | | | | | | |     |     | |           |     |     | | | |     |       |     | |       |     |     |     |       |       | |                   | |   | |   |   | |     | | | | |   | | | |     
 |   | | | | | | | | | |     |     | |           |     |     | | | +-----+       |     | |       |     |     |   +-|-----------+   | |               +-----|---|-----+   | |     | | | | |   | | | |     
 |   | | | | | | | | | |     |     | |           |     |     | | |               |     | |       |     |     |   | |       |   |   | |               |   | |   | |       | |     | | | | |   | | | |     
 |   | +---------|-----------|-------|-----------------|---+ | | |               |     | |       |     |     |   | |       |   |   | |   +---------------|-|---|---------|-|-+   | +-+ | |   | | | |     
 |   |   | | | | | | | |     |     | |           |     |   | | | |               |     | |       |     |     |   | |       |   |   | |   |           |   | |   | |       | | |   |     | |   | | | |     
 |   |   | | | | +-----|-----------|-----------------------|-|---|-------+       |     | |       |     |     |   | |       |   |   | |   |           |   | +---|-|-------|-------------|-----------|-+   
 |   |   | | | |   | | |     |     | |           |     |   | | | |       |       |     | |       |     |     |   | |       |   |   | |   |           |   |     | |       | | |   |     | |   | | | | |   
 |   |   | | | |   | | |     |     | |           |     |   | | | |       |       |     | |       |     |     +-----|-----------|---|---------------------------+ |       | | |   |     | |   | | | | |   
 |   |   | | | |   | | |     |     | |           |     |   | | | |       |       |     | |       |     |         | |       |   |   | |   |           |   |       |       | | |   |     | |   | | | | |   
 |   |   | | | |   | | |     |     | |           |     |   | | | |       |       |     | |       |     |         | |       |   |   | |   |           |   |       |       | | |   |     | |   | | | | |   
 |   |   | | | |   | | |     |     | |           |     |   | | | |       |       |     | |       |     |         | |       |   |   | |   |           |   |       |       | | |   |     | |   | | | | |   
 |   | +---|---|-------------|-----|---------------------------+ |       |       |     | |       |     |         | |       |   |   | |   |           |   |       |       | | |   |     | |   | | | | |   
 |   | | | | | |   | | |     |     | |           |     |   | |   |       |       |     | |       |     |         | |       |   |   | |   |           |   |       |       | | |   |     | |   | | | | |   
 |   | | | | | |   | | |     |     | |           |     |   | |   |       |       |     | |       |     |         | |       |   |   | |   |           |   |       |       | | |   |     | |   | | | | |   
 |   | | | | | |   | | |     |     | |           |     |   | |   |       |       |     | |       |     |         | |       |   |   | |   |           |   |       |       | | |   |     | |   | | | | |   
 |   | | | | | |   | | |     |     | |           |     |   | |   |     +-|-------|-------|-------------+         | |       |   |   | |   |           |   |       |       | | |   | +---|-|---|---|---+   
 |   | | | | | |   | | |     |     | |           |     |   | |   |     | |       |     | |       |               | |       |   |   | |   |           |   |       |       | | |   | |   | |   | | | |     
 |   | | | | | |   | | |     |     | |           |     |   | +---------|---------------|-|-------|---------------|-------------------|---+           |   |       |       | | |   | |   | |   | | | |     
 |   | | | | | |   | | |     |     | |           |     |   |     |     | |       |     | |       |               | |       |   |   | |               |   |       |       | | |   | |   | |   | | | |     
 |   | | | | | |   | | |     |   +--------L------------|-----+   |     | +-+     |     | |       |               +---------|---|---------------------------------|---------+ |   | |   | |   | | | |     
 |   | | | | | |   | | |     |   | | |           |     |   | |   |     |   |     |     | |       |                 |       |   |   | |               |   |       |       |   |   | |   | |   | | | |     
 | +-|-|-|-|-|-----|---|-----|---|-|-+           +---------|-----|---------------|-----|---------|-----------------|-----------+   | |               |   |       |       |   |   | |   | |   | | | |     
 | | | | | | | |   | | |     |   | |                   |   | |   |     |   |     |     | |       |                 |       |       | |               |   |       |       |   |   | |   | |   | | | |     
 | | +-|-----|-----+ | |     |   | | +-------+         |   | |   |     |   |     |     | |       |                 |       |       | |               |   |       |       |   |   | |   | |   | | | |     
 | |   | | | | |     | |     |   | | |       |         |   | |   |     |   |     |     | |       |                 |       |       | |               |   |       |       |   |   | |   | |   | | | |     
 | +-----+ | | | +-----|-----|---|---|---------------------|---------------|-----|-------|-------|-----------------|-------|-------+ |               |   |       |       |   |   | |   | |   | | | |     
 |     |   | | | |   | |     |   | | |       |         |   | |   |     |   |     |     | |       |                 |       |         |               |   |       |       |   |   | |   | |   | | | |     
 |     |   | | | |   | | +---|-----+ +-------|---------|-----|---------+   |     |     | |       |                 |       |         |               |   |       |       |   |   | |   | |   | | | |     
 |     |   | | | |   | | |   |   |           |         |   | |   |         |     |     | |       |                 |       |         |               |   |       |       |   |   | |   | |   | | | |     
 | +-------+ | | |   | | |   |   +-----+     |         |   | |   |     +---|-----------|---------|-----------------------------------|-------------------|-------+       |   |   | |   | |   | | | |     
 | |   |     | | |   | | |   |         |     |         |   | |   |     |   |     |     | |       |                 |       |         |               |   |               |   |   | |   | |   | | | |     
 | |   |     | | |   | | |   |         |     |         |   | |   |     |   |     |     | |       |                 |       |         |               |   |               |   |   | |   | |   | | | |     
 | |   |     | | |   | | |   |         |     |         |   | |   |     |   |     |     | |       |                 |       |         |               |   |               |   |   | |   | |   | | | |     
 | |   |     | | |   | | |   |         |     |         |   | |   |     |   |     |     | |       |       +-----------------|---------|-------------------|-------------------|-+ | |   | |   | | | |     
 | |   |     | | |   | | |   |         |     |         |   | |   |     |   |     |     | |       |       |         |       |         |               |   |               |   | | | |   | |   | | | |     
 | |   |     | | |   | | |   |     +---|---------------|---|-----------|-------+ |     | |       |       |         |       |         |               |   |           +-----+ | | | |   | |   | | | |     
 | |   |     | | |   | | |   |     |   |     |         |   | |   |     |   |   | |     | |       |       |         |       |         |               |   |           |   | | | | | |   | |   | | | |     
 +-----------|-|-----|-|-----|---------|-----|-------------------|-----|---|-----------|-|---------------|---------|-------|-----------------------------|---------------+ | | | | |   | |   | +-----+   
   |   |     | | |   | | |   |     |   |     |         |   | |   |     |   |   | |     | |       |       |         |       |         |               |   |           |     | | | | |   | |   |   | | |   
   |   |     | | |   | | |   |     |   |     |         |   | |   |     |   |   | |     | |       |       |         |       |         |               |   |           |     | | | | |   | |   |   | | |   
   |   |     | | |   | | |   |     |   |     |         |   | |   |     |   |   | |     | |       |       |         |       |         |               |   |           |     | | | | |   | |   |   | | |   
   |   |     | | |   | | |   |     |   |     |         |   | |   |     |   |   | |     | |       |       |         |       |         |               |   |           |     | | | | |   | |   |   | | |   
   |   |     | | |   | | |   |     |   |     |         |   | |   |     |   |   | |     | |       |       |         |       |         |               |   |           |     | | | | |   | |   |   | | |   
 +-+   |     | +-+   | | |   |     |   |     |         |   | |   |     |   |   | +-----------------------|-----------------|-----------------------------------------------+ | | | |   | |   |   | | |   
 |     |     |       | | |   |     |   |     |         |   | |   |     |   |   |       | |       |       |         |       |         |               |   |           |       | | | |   | |   |   | | |   
 | +---+     |       | | |   |     |   |     |         |   | |   |     |   |   |       | |       |       |         |       |         |               |   |           |       | | | |   | |   |   | | |   
 | |         |       | | |   |     |   |     |         |   | |   |     |   |   |       | |       |       |         |       |         |               |   |           |       | | | |   | |   |   | | |   
 | +-------+ +---+   +-|-------+   |   |     |         |   | |   |     |   |   |       | |       |       |         |       |         |               |   +-+         |       | | | |   | |   |   | | |   
 |         |     |     | |   | |   |   |     |         |   | |   |     |   |   |       | |       |       |         |       |         |               |     |         |       | | | |   | |   |   | | |   
 |         +-----|-------|-------------|-----|-------------|-----|---------|-----------|-|---------------+         +-+     |         +---------------------|---------------------|-+   | |   |   | | |   
 |               |     | |   | |   |   |     |         |   | |   |     |   |   |       | |       |                   |     |                         |     |         |       | | |     | |   |   | | |   
 |             +-------+ |   | |   |   |     |         |   +-----|-----|---------------------------------------------|-----|-----------------+   +-------------------+     +-----+     | |   |   | | |   
 |             | |       |   | |   |   |     |         |     |   |     |   |   |       | |       |                   |     |                 |   |   |     |               | | |       | |   |   | | |   
 |     +-------+ |   +---|---|-|---|-----+   |         |     |   |     |   |   |       | |       |                   +-----+                 |   |   |     |               | | |       | |   +-+ | | |   
 |     |         |   |   |   | |   |   | |   |         |     |   |     |   |   |       | |       |                                           |   |   |     |               | | |       | |     | | | |   
 |     |       +-----+ +-----------------|---|-----------------------------|-----------|-----------------------------------------------------+   |   |     |               | | |       | |     | | | |   
 |     |       | |     | |   | |   |   | |   |         |     |   |     |   |   |       | |       |                                               |   |     |               | | |       | |     | | | |   
 |     |       | +-----+ |   | |   |   | |   |         |     |   |     |   |   |       | |       |                                   +-----------+   +---+ |               | | |       | |     | | | |   
 |     |       |         |   | |   |   | |   |         |     |   |     |   |   |       | |       |                                   |                   | |               | | |       | |     | | | |   
 +-------------+ +-----U +---------|---+ |   |         |     |   |     |   |   | +---------------------------------------------------|-------------------+ +---------------+ | |       | |     | | | |   
       |         |           | |   |     |   |         |     |   |     |   |   | |     | |       |                                   |                                       | |       | |     | | | |   
       |   +-----------------+ |   |     |   |         |     |   |     |   |   | |     | | +-----------------------------------------|---------------------------------------+ |       | |     | | | |   
       |   |     |             |   |     |   |         |     |   |     |   |   | |     | | |     |                                   |                                         |       | |     | | | |   
   +---+   |     +-----------------|-+   +---|---------|-----|---|-------------|-----+ | | +-----|-----------------------------------|---------------------------------------+ +-+     | |     +---+ +-+ 
   |       |                   |   | |       |         |     |   |     |   |   | |   | | |       |                                   |                                       |   |     | |       |     | 
 +---------+ +-----------------+   | +---+   |   +-----------+   +---------------+ +-+ +-|-+     | +-----------------------------------------------------------------------------------|-|-------|-----+ 
 | |         |                     |     |   |   |     |               |   |   |   |     | |     | |                                 |                                       |   |     | |       |       
 | +---+   +-|-------------------------------|-----------------------------|-------|-------------+ |                 +-------------------------------------------------------+ +-+     | |       |       
 |     |   | |                     |     |   |   |     |               |   |   |   |     | |       |                 |               |                                         |       | |       |       
 +---------+ +---------------------|-+   +---+   +-------------------------+   |   |     +-|-------|-----------------+               +-----------------------------------------+       | |       +-+     
       |                           | |                 |               |       |   |       |       |                                                                                   | |         |     
       +---------------------------+ +-----------------+               +-------+   +-------+       +-----------------------------------------------------------------------------------+ +---------+     
                                                                                                                                                                                                         
`;



const testInput = 
`
     |          
     |  +--+    
     A  |  C    
 F---|----E|--+ 
     |  |  |  D 
     +B-+  +--+ 
`;


const printArray = arr =>(
    arr
        .forEach(line=>console.log(line.join("")))
    ,arr)



const mapInputToArray = input=>
    input
        .split("\n")
        .slice(1)
        .map(str=>str.split(""))



const findStart = arr=>(
    {
        x:arr[0].indexOf("|"),
        y:0

    })

const isLetter = ch =>
    ch.match(/\w/gi)

const takeStepInArray = (array,lastPosition,lastDirection="s",step=0)=>()=>{
    //const crossRoads = find4(lastPosition.x,lastPosition.y,array,"+")
    
    const northPos = {x:lastPosition.x,y:lastPosition.y-1}
    const southPos = {x:lastPosition.x,y:lastPosition.y+1}
    const eastPos = {x:lastPosition.x+1,y:lastPosition.y}
    const westPos = {x:lastPosition.x-1,y:lastPosition.y}

    const northElem = northPos.y >= 0 ? array[northPos.y][northPos.x] : " ";
    const southElem = southPos.y < array.length ? array[southPos.y][southPos.x] : " ";
    const eastElem = eastPos.x < array[0].length ? array[eastPos.y][eastPos.x] :  " ";
    const westElem = eastPos.x >= 0 ? array[westPos.y][westPos.x] : " ";
    const thisElem = array[lastPosition.y][lastPosition.x];

    let newPosition;
    let newDirection = lastDirection;

    if(thisElem.match(/\w/ig))
        console.log(thisElem);

    if(thisElem.match(" ")){
        console.log("finished,step:",step)
        return;
    }

    switch(lastDirection){
        case("n"):
            if(thisElem!=="+"){
                newPosition = northPos;
            }
            else{
                if(eastElem === "-" || isLetter(eastElem)){
                    newPosition = eastPos;
                    newDirection ="e"
                }
                else{
                    newPosition = westPos;
                    newDirection ="w"
                }
            }        
            break;
        case("s"):
            if(thisElem!=="+"){
                newPosition = southPos;
            }
            else{
                if(eastElem === "-" || isLetter(eastElem)){
                    newPosition = eastPos;
                    newDirection ="e"
                }
                else{
                    newPosition = westPos;
                    newDirection ="w"
                }
            }
            break;
        case("e"):
            if(thisElem!=="+"){
                newPosition = eastPos;
            }
            else{
                if(northElem === "|" || isLetter(northElem)){
                    newPosition = northPos;
                    newDirection = "n";
                }
                else{
                    newPosition = southPos;
                    newDirection = "s";
                }
            }
            break;
        case("w"):
            if(thisElem!=="+"){
                newPosition = westPos;
            }
            else{
                if(northElem === "|" || isLetter(northElem)){
                    newPosition = northPos;
                    newDirection = "n";
                }
                else{
                    newPosition = southPos;
                    newDirection = "s";
                }
            }
            break;
        default:
            console.warn("Bad direction in array:",lastDirection)
            break;
    }
    
    return takeStepInArray(array,newPosition,newDirection,step+1);
}

const mapArray = 
    mapInputToArray(input);

trampoline(takeStepInArray(
    mapArray,
    findStart(mapArray)
))

// console.log(
//     printArray(
//         mapInputToArray(testInput)
//     ),
//     findStart(
//         mapInputToArray(testInput))



// )




</script>
